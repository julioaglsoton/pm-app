(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{183:function(e,t,a){e.exports=a(469)},188:function(e,t,a){},192:function(e,t,a){},385:function(e,t,a){},421:function(e,t,a){},424:function(e,t,a){},426:function(e,t,a){},429:function(e,t,a){},431:function(e,t,a){},433:function(e,t,a){},460:function(e,t,a){},469:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(35),i=a.n(s),l=(a(188),a(4)),c=a.n(l),o=a(11),u=a(27),d=a(28),m=a(30),p=a(29),h=a(31),_=a(96),f=a(169),g=a(480),E=a(477),v=a(478),x=(a(192),a(168)),y=a(98),j=a(471),b=a(472),w=a(473),k=a(9),C=a.n(k),S=(a(385),{REGION:"us-east-2",BUCKET:"pm-app-jagl-usca2018"}),A={REGION:"us-east-2",URL:"https://6ow3xl1ddc.execute-api.us-east-2.amazonaws.com/prod"},I={REGION:"us-east-2",USER_POOL_ID:"us-east-2_gfIDRIztA",APP_CLIENT_ID:"63gs4osh3h3817a36bn1kjqpvs",IDENTITY_POOL_ID:"us-east-2:d23445ff-18cd-4675-a95b-4ac1e58793f9"};function O(e){for(var t="",a="",n="",r="",s="",i=0;i<e.length;i++)if(e[i].tx_user_mail===F("tx_user_mail")){t=e[i].id_user,a=e[i].tx_role,n=e[i].tx_stts,r=e[i].tx_user_mail,s=e[i].tx_user_name;break}return{id_user:t,tx_role:a,tx_stts:n,tx_user_mail:r,tx_user_name:s}}function P(e,t){var a="",n=0;for(n=0;n<e.length;n++)if(e[n].id_user===t){a=e[n].tx_role;break}return{nu_indx:n,tx_role:a}}function B(e,t){var a=t||window.location.href,n=new RegExp("[?&]"+e+"=([^&#]*)","i").exec(a);return n?n[1]:null}function L(e,t){var a=0,n=[];for(a=0;a<t.length;a++)t[a].tx_user_name.indexOf(e)>=0&&n.push(t[a]);return n}function U(e,t){var a=0,n=[];for(a=0;a<t.length;a++)t[a].tx_prjt_name.indexOf(e)>=0&&n.push(t[a]);return n}function D(e,t){var a=0,n=[];for(a=0;a<t.length;a++)t[a].id_user===e&&n.push(t[a].id_prjt);return n}function N(e,t){var a=0,n=[];for(a=0;a<t.length;a++)t[a].id_prjt===e&&n.push(t[a].id_prjt);return n}function M(e,t){document.cookie=e+"="+t}function F(e){for(var t=e+"=",a=document.cookie.split(";"),n=0;n<a.length;n++){for(var r=a[n];" "===r.charAt(0);)r=r.substring(1);if(0===r.indexOf(t))return r.substring(t.length,r.length)}return""}var z=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).handleSearch=function(){var e=Object(o.a)(c.a.mark(function e(t){var n,r,s,i,l;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=document.getElementById("txt_search").value.trim(),r=L(n,a.state.users),s=U(n,a.state.projects),i=0,l="",0===r.length&&0===s.length)l="The systems did not find any users nor projects.";else{for(i=0;i<r.length;i++)0===i&&(l+="Users found: <ul>"),l+="<li> <a href='/userAdministration?user="+r[i].id_user+"'>"+r[i].tx_user_name+"</a> </li>",i===r.length-1&&(l+="</ul>");for(i=0;i<s.length;i++)0===i&&(l+="Projects found: <ul>"),l+="<li> <a href='/projectAdministration?project="+s[i].id_prjt+"'>"+s[i].tx_prjt_name+"</a> </li>",i===r.length-1&&(l+="</ul>")}document.getElementById("divResults").innerHTML=l;case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.state={isLoading:!0,users:[],projects:[]},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(c.a.mark(function e(){var t,a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.isAuthenticated){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.users();case 5:return t=e.sent,this.setState({users:t}),e.next=9,this.projects();case 9:a=e.sent,this.setState({projects:a}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),alert(e.t0);case 16:if(this.setState({isLoading:!1}),"Inactive"!==O(this.state.users).tx_stts){e.next=24;break}return alert("Your account is currently inactive, please ask the administrator to activate your account"),e.next=21,k.Auth.signOut();case 21:this.props.userHasAuthenticated(!1),M("tx_user_mail",""),this.props.history.push("/login");case 24:case"end":return e.stop()}},e,this,[[2,13]])}));return function(){return e.apply(this,arguments)}}()},{key:"users",value:function(){return k.API.get("pm","/list-users")}},{key:"projects",value:function(){return k.API.get("pm","/list-projects")}},{key:"renderUserLinks",value:function(){var e=O(this.state.users).tx_role;return"Admin"===e?r.a.createElement("div",null,r.a.createElement(j.a,{striped:!0,bordered:!0,condensed:!0,hover:!0},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{align:"center",width:"33%"}," ",r.a.createElement(_.a,{to:"/useradministration"}," User administration panel ")," ",r.a.createElement("div",null," ",r.a.createElement(_.a,{to:"/useradministration"}," ",r.a.createElement("img",{src:"./pmicons/001-profile.png",class:"pmicons",alt:""})," ")," ")," "),r.a.createElement("td",{align:"center",width:"33%"}," ",r.a.createElement(_.a,{to:"/projectadministration"}," Project administration panel ")," ",r.a.createElement("div",null," ",r.a.createElement(_.a,{to:"/projectadministration"}," ",r.a.createElement("img",{src:"./pmicons/007-office.png",class:"pmicons",alt:""})," ")," ")," "),r.a.createElement("td",{align:"center",width:"33%"}," ",r.a.createElement(_.a,{to:"/assignationprojects"}," Project staffing ")," ",r.a.createElement("div",null," ",r.a.createElement(_.a,{to:"/assignationprojects"}," ",r.a.createElement("img",{src:"./pmicons/029-diagram.png",class:"pmicons",alt:""})," ")," ")," ")))),r.a.createElement(j.a,{striped:!0,bordered:!0,condensed:!0,hover:!0}," ",r.a.createElement("tr",null," ",r.a.createElement("td",{align:"left"}," ",r.a.createElement("div",{id:"divSearch"}," Search users or projects by name: ",r.a.createElement("input",{type:"text",id:"txt_search"})," ",r.a.createElement(b.a,{onClick:this.handleSearch,bsStyle:"primary"}," Search ")," ")," ",r.a.createElement("div",{id:"divResults"}," ")," ")," ")," ")):"PM"===e?r.a.createElement("div",null,r.a.createElement(j.a,{striped:!0,bordered:!0,condensed:!0,hover:!0},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{align:"center",width:"33%"}," ",r.a.createElement(_.a,{to:"/projectadministration"}," Project tracking ")," ",r.a.createElement("div",null," ",r.a.createElement(_.a,{to:"/projectadministration"}," ",r.a.createElement("img",{src:"./pmicons/007-office.png",class:"pmicons",alt:""})," ")," ")," "),r.a.createElement("td",{align:"center",width:"33%"}," ",r.a.createElement(_.a,{to:"/assignationprojects"}," Project staffing ")," ",r.a.createElement("div",null," ",r.a.createElement(_.a,{to:"/assignationprojects"}," ",r.a.createElement("img",{src:"./pmicons/029-diagram.png",class:"pmicons",alt:""})," ")," ")),r.a.createElement("td",{align:"center",width:"33%"}," ",r.a.createElement(_.a,{to:"/useradministration"}," User administration panel ")," ",r.a.createElement("div",null," ",r.a.createElement(_.a,{to:"/useradministration"}," ",r.a.createElement("img",{src:"./pmicons/001-profile.png",class:"pmicons",alt:""})," ")," ")," "))))):"Developer"===e?r.a.createElement("div",null,r.a.createElement(j.a,{striped:!0,bordered:!0,condensed:!0,hover:!0},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{align:"center",width:"50%"}," ",r.a.createElement(_.a,{to:"/projectadministration"}," My projects ")," ",r.a.createElement("div",null," ",r.a.createElement(_.a,{to:"/projectadministration"}," ",r.a.createElement("img",{src:"./pmicons/007-office.png",class:"pmicons",alt:""})," ")," ")," "),r.a.createElement("td",{align:"center",width:"50%"}," ",r.a.createElement(_.a,{to:"/useradministration"}," User administration panel ")," ",r.a.createElement("div",null," ",r.a.createElement(_.a,{to:"/useradministration"}," ",r.a.createElement("img",{src:"./pmicons/001-profile.png",class:"pmicons",alt:""})," ")," ")," "))))):void 0}},{key:"renderLander",value:function(){return r.a.createElement("div",{className:"lander"},r.a.createElement("h1",null,"Project Management Application"),r.a.createElement("img",{src:"./inicio.png",alt:""}))}},{key:"renderUser",value:function(){return r.a.createElement("div",{className:"users"},this.state.isLoading?"":r.a.createElement("div",null," ",r.a.createElement("table",{width:"100%"}," ",r.a.createElement("tr",null," ",r.a.createElement("td",null," ",r.a.createElement(w.a,{align:"left",id:"pageHeader"}," Hi ",O(this.state.users).tx_user_name,"! ")," ")," ",r.a.createElement("td",null," ",r.a.createElement("div",{align:"right",id:"divRole"}," ",r.a.createElement("img",{src:"./users.png",alt:""})," ",O(this.state.users).tx_role," ")," ")," ")," ")," "),!this.state.isLoading&&this.renderUserLinks())}},{key:"render",value:function(){return r.a.createElement("div",{className:"Home"},this.props.isAuthenticated?this.renderUser():this.renderLander())}}]),t}(n.Component),H=a(52),T=a(474),R=a(475),G=a(481),Y=a(476),W=a(43),$=a(423),J=(a(421),function(e){var t=e.isLoading,a=e.text,n=e.loadingText,s=e.className,i=void 0===s?"":s,l=e.disabled,c=void 0!==l&&l,o=Object(W.a)(e,["isLoading","text","loadingText","className","disabled"]);return r.a.createElement(b.a,Object.assign({className:"LoaderButton ".concat(i),disabled:c||t},o),t&&r.a.createElement($.a,{glyph:"refresh",className:"spinning"}),t?n:a)}),K=(a(424),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(H.a)({},e.target.id,e.target.value))},a.handleSubmit=function(){var e=Object(o.a)(c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a.setState({isLoading:!0}),e.prev=2,e.next=5,k.Auth.signIn(a.state.email,a.state.password);case 5:a.props.userHasAuthenticated(!0),M("tx_user_mail",a.state.email),a.props.history.push("/"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),"User is not confirmed."===e.t0.message?(!0,a.setState({newUser:!0})):alert(e.t0.message),a.setState({isLoading:!1});case 14:case"end":return e.stop()}},e,this,[[2,10]])}));return function(t){return e.apply(this,arguments)}}(),a.handleConfirmationSubmit=function(){var e=Object(o.a)(c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a.setState({isLoading:!0}),e.prev=2,e.next=5,k.Auth.confirmSignUp(a.state.email,a.state.confirmationCode);case 5:return e.next=7,k.Auth.signIn(a.state.email,a.state.password);case 7:M("tx_user_mail",a.state.email),a.props.userHasAuthenticated(!0),a.props.history.push("/"),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),alert(e.t0.message),a.setState({isLoading:!1});case 16:case"end":return e.stop()}},e,this,[[2,12]])}));return function(t){return e.apply(this,arguments)}}(),a.state={isLoading:!1,email:"",password:"",newUser:null,confirmationCode:""},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"validateForm",value:function(){return this.state.email.length>0&&this.state.password.length>0}},{key:"validateConfirmationForm",value:function(){return this.state.confirmationCode.length>0}},{key:"renderConfirmationForm",value:function(){return r.a.createElement("form",{onSubmit:this.handleConfirmationSubmit},r.a.createElement(T.a,{controlId:"confirmationCode",bsSize:"medium"},r.a.createElement(R.a,null,"Confirmation Code"),r.a.createElement(G.a,{autoFocus:!0,type:"tel",value:this.state.confirmationCode,onChange:this.handleChange}),r.a.createElement(Y.a,null,"Please check your email for the code.")),r.a.createElement(J,{block:!0,bsSize:"small",disabled:!this.validateConfirmationForm(),type:"submit",isLoading:this.state.isLoading,text:"Verify",loadingText:"Verifying\u2026"}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"Login",align:"center"},null===this.state.newUser?r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(T.a,{controlId:"email",bsSize:"medium"},r.a.createElement(R.a,null,"Email"),r.a.createElement(G.a,{autoFocus:!0,type:"email",value:this.state.email,onChange:this.handleChange})),r.a.createElement(T.a,{controlId:"password",bsSize:"medium"},r.a.createElement(R.a,null,"Password"),r.a.createElement(G.a,{value:this.state.password,onChange:this.handleChange,type:"password"})),r.a.createElement(J,{block:!0,bsSize:"small",disabled:!this.validateForm(),type:"submit",isLoading:this.state.isLoading,text:"Login",loadingText:"Logging in\u2026"})):this.renderConfirmationForm())}}]),t}(n.Component)),V=(a(426),function(){return r.a.createElement("div",{className:"NotFound"},r.a.createElement("h3",null,"Page not found"))}),q=function(e){var t=e.component,a=e.props,n=Object(W.a)(e,["component","props"]);return r.a.createElement(y.a,Object.assign({},n,{render:function(e){return r.a.createElement(t,Object.assign({},e,a))}}))},Q=(a(429),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(H.a)({},e.target.id,e.target.value))},a.handleSubmit=function(){var e=Object(o.a)(c.a.mark(function e(t){var n,r,s;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(t.preventDefault(),n=0,r=0,n=0;n<a.state.users.length;n++)a.state.users[n].tx_user_mail===a.state.tx_user_mail&&(r=1);if(1!==r){e.next=8;break}alert("An user with the e-mail address '"+a.state.tx_user_mail+"' already exists. Please provide a different e-mail address."),e.next=23;break;case 8:return s={tx_user_name:a.state.tx_user_name,tx_role:a.state.tx_role,tx_user_mail:a.state.tx_user_mail,tx_stts:"Active"},a.setState({isLoading:!0}),e.prev=10,e.next=13,a.createUser(s);case 13:return e.next=15,k.Auth.signUp({username:a.state.tx_user_mail,password:a.state.password});case 15:e.sent,a.props.history.push("/useradministration"),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(10),alert(e.t0.message);case 22:a.setState({isLoading:!1});case 23:case"end":return e.stop()}},e,this,[[10,19]])}));return function(t){return e.apply(this,arguments)}}(),a.state={isLoading:!0,tx_user_name:"",tx_role:"Admin",tx_user_mail:"",password:"",users:[]},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(c.a.mark(function e(){var t;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.isAuthenticated){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.users();case 5:t=e.sent,this.setState({users:t}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),alert(e.t0);case 12:this.setState({isLoading:!1});case 13:case"end":return e.stop()}},e,this,[[2,9]])}));return function(){return e.apply(this,arguments)}}()},{key:"createUser",value:function(e){return k.API.post("pm","/create-users/",{body:e})}},{key:"users",value:function(){return k.API.get("pm","/list-users")}},{key:"validateForm",value:function(){return this.state.tx_user_name.length>0&&this.state.tx_user_mail.length>0&&this.state.password.length>0}},{key:"renderForm",value:function(){if("Admin"===O(this.state.users).tx_role)return r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{align:"left"}," ",r.a.createElement(_.a,{to:"/useradministration"}," ",r.a.createElement(b.a,{bsStyle:"info"}," Back ")," ")," "),r.a.createElement(j.a,{striped:!0,bordered:!0,condensed:!0,hover:!0},r.a.createElement("thead",null," ",r.a.createElement("tr",null," ",r.a.createElement("th",null," User name ")," ",r.a.createElement("th",null," Role ")," ",r.a.createElement("th",null," Email ")," ",r.a.createElement("th",null," Password ")," ")," "),r.a.createElement("tr",null,r.a.createElement("td",{align:"left",width:"25%"},r.a.createElement(T.a,{controlId:"tx_user_name",bsSize:"small"},r.a.createElement(G.a,{autoFocus:!0,type:"text",value:this.state.tx_user_name,onChange:this.handleChange}))),r.a.createElement("td",{align:"left",width:"25%"},r.a.createElement(T.a,{controlId:"tx_role",onChange:this.handleChange},r.a.createElement(G.a,{componentClass:"select",placeholder:"select",value:this.state.tx_role,onChange:this.handleChange},r.a.createElement("option",{value:"Admin"},"Admin"),r.a.createElement("option",{value:"PM"},"PM"),r.a.createElement("option",{value:"Developer"},"Developer")))),r.a.createElement("td",{align:"left",width:"25%"},r.a.createElement(T.a,{controlId:"tx_user_mail",bsSize:"small"},r.a.createElement(G.a,{autoFocus:!0,type:"email",value:this.state.tx_user_mail,onChange:this.handleChange}))),r.a.createElement("td",{align:"left",width:"25%"},r.a.createElement(T.a,{controlId:"password",bsSize:"small"},r.a.createElement(G.a,{value:this.state.password,onChange:this.handleChange,type:"password"}))))),r.a.createElement(J,{block:!0,bsSize:"small",disabled:!this.validateForm(),type:"submit",isLoading:this.state.isLoading,text:"Create user",loadingText:"Creating user ..."}));this.props.history.push("/")}},{key:"render",value:function(){return r.a.createElement("div",{className:"UserAdministration"},r.a.createElement(w.a,null," New user "),!this.state.isLoading&&this.renderForm())}}]),t}(n.Component)),X=(a(431),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).handleEdit=function(){var e=Object(o.a)(c.a.mark(function e(t){var a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=t.target.id.split("|"),document.getElementById("tr|"+a[0]+"|view").style.display="none",document.getElementById("tr|"+a[0]+"|edit").style.display="table-row";case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.handleCancel=function(){var e=Object(o.a)(c.a.mark(function e(t){var a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=t.target.id.split("|"),document.getElementById("tr|"+a[0]+"|view").style.display="table-row",document.getElementById("tr|"+a[0]+"|edit").style.display="none";case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.handleUpdate=function(){var e=Object(o.a)(c.a.mark(function e(t){var n,r,s,i;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target.id.split("|"),r=0,s=[],document.getElementById(n[0]+"|tx_role_current").value!==document.getElementById(n[0]+"|tx_role").value&&(s=D(n[0],a.state.users_and_projects)).length>0&&(alert("Before changing the user role, deallocate this user from his current assignments ("+s.length+" project(s))"),r=1),""===document.getElementById(n[0]+"|tx_user_name").value.trim()&&(alert("Please provide a new user name"),r=1),0!==r){e.next=20;break}return i={tx_user_name:document.getElementById(n[0]+"|tx_user_name").value.trim(),tx_role:document.getElementById(n[0]+"|tx_role").value,tx_user_mail:document.getElementById(n[0]+"|tx_user_mail").value,tx_stts:document.getElementById(n[0]+"|tx_stts").value},a.setState({isLoading:!0}),e.prev=8,e.next=11,a.updateUser(n[0],i);case 11:a.props.history.push("/useradministration"),window.location.reload(),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(8),alert(e.t0.message);case 18:document.getElementById("divMain").style.display="none",a.setState({isLoading:!1});case 20:case"end":return e.stop()}},e,this,[[8,15]])}));return function(t){return e.apply(this,arguments)}}(),a.filterStatus=function(){var e=Object(o.a)(c.a.mark(function e(t){var a,n,r,s,i;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=document.getElementById(t.target.id).value,n=document.getElementsByClassName("Active_tr_status"),r=document.getElementsByClassName("Inactive_tr_status"),s=document.getElementsByClassName("tredit"),i=0,"All"===a){for(i=0;i<n.length;i++)n[i].style.display="table-row";for(i=0;i<r.length;i++)r[i].style.display="table-row"}else if("Active"===a){for(i=0;i<n.length;i++)n[i].style.display="table-row";for(i=0;i<r.length;i++)r[i].style.display="none"}else{for(i=0;i<n.length;i++)n[i].style.display="none";for(i=0;i<r.length;i++)r[i].style.display="table-row"}for(i=0;i<s.length;i++)s[i].style.display="none";case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.state={isLoading:!0,users:[],users_and_projects:[]},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(c.a.mark(function e(){var t,a,n,r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.isAuthenticated){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.users();case 5:return t=e.sent,this.setState({users:t}),e.next=9,this.users_and_projects();case 9:a=e.sent,this.setState({users_and_projects:a}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),alert(e.t0);case 16:for(this.setState({isLoading:!1}),n=document.getElementsByClassName("tredit"),r=0;r<n.length;r++)n[r].style.display="none";this.state.users.map(function(e,t){try{document.getElementById(e.id_user+"|tx_user_name").value=e.tx_user_name,document.getElementById(e.id_user+"|tx_stts").value=e.tx_stts,document.getElementById(e.id_user+"|tx_role").value=e.tx_role}catch(a){}});case 20:case"end":return e.stop()}},e,this,[[2,13]])}));return function(){return e.apply(this,arguments)}}()},{key:"users",value:function(){return k.API.get("pm","/list-users")}},{key:"users_and_projects",value:function(){return k.API.get("pm","/list-users-and-projects")}},{key:"updateUser",value:function(e,t){return k.API.put("pm","/update-users/"+e,{body:t})}},{key:"drawUsersTable",value:function(){var e=this,t=O(this.state.users).tx_role,a=O(this.state.users).tx_user_mail,s=1;if("Admin"===t||"PM"===t||"Developer"===t)return r.a.createElement("div",{id:"divMain"}," ",r.a.createElement("form",null,r.a.createElement(w.a,{align:"left",id:"pageHeader"}," ",r.a.createElement("img",{src:"./pmicons/013-paper-plane.png",class:"pmsmallicons",alt:""})," ","Admin"===t?"User administration":"My info"," "),"Admin"===t?r.a.createElement("div",null," ",r.a.createElement(j.a,{striped:!0,bordered:!0,condensed:!0,hover:!0}," ",r.a.createElement("tr",null,r.a.createElement("td",{align:"left",width:"50%"}," ",r.a.createElement(_.a,{to:"/signup"}," ",r.a.createElement(b.a,{bsStyle:"success"}," New user ")," ")," "),r.a.createElement("td",{align:"right",width:"50%"},r.a.createElement(T.a,{controlId:"ddl_role",bsSize:"small"},r.a.createElement(R.a,null,"Select user status"),r.a.createElement(G.a,{componentClass:"select",placeholder:"select",onChange:this.filterStatus},r.a.createElement("option",{value:"All"},"All"),r.a.createElement("option",{value:"Active"},"Active"),r.a.createElement("option",{value:"Inactive"},"Inactive")))))," ")," "):"",r.a.createElement("div",{align:"center"}," ",r.a.createElement(j.a,{striped:!0,bordered:!0,condensed:!0,hover:!0},r.a.createElement("thead",{class:"tHeadUsers"}," ",r.a.createElement("tr",null,r.a.createElement("th",null," # ")," ",r.a.createElement("th",null," User name "),"Admin"===t?r.a.createElement(n.Fragment,null,r.a.createElement("th",null," Role ")," ",r.a.createElement("th",null," Email ")," ",r.a.createElement("th",null," Status ")):"",r.a.createElement("th",null," Edit ")," ")," "),this.state.users.sort(function(e,t){return e.tx_user_name<t.tx_user_name?-1:e.tx_user_name>t.tx_user_name?1:0}).map(function(i,l){return r.a.createElement(n.Fragment,null,"Admin"===t&&(""!==B("user")&&i.id_user===B("user")||""===B("user")||null===B("user"))||"Admin"!==t&&i.tx_user_mail===a?r.a.createElement(n.Fragment,null,r.a.createElement("tr",{class:i.tx_stts+"_tr_status trUsers",id:"tr|"+i.id_user+"|view"},r.a.createElement("td",{width:"5%"}," ",s," "),r.a.createElement("td",{align:"left",width:"25%",id:i.id_user+"|tr_user_name"}," ",i.tx_user_name," "),"Admin"===t?r.a.createElement(n.Fragment,null,r.a.createElement("td",{align:"left",width:"20%",id:i.id_user+"|tr_role"}," ",i.tx_role," "),r.a.createElement("td",{align:"left",width:"25%",id:i.id_user+"|tr_user_mail"}," ",i.tx_user_mail," "),r.a.createElement("td",{align:"left",width:"10%",id:i.id_user+"|tr_stts"}," ",i.tx_stts," ")):"",r.a.createElement("td",{align:"left",width:"20%"}," ",r.a.createElement(b.a,{id:i.id_user+"|"+i.tx_user_name+"|"+i.tx_role+"|"+i.tx_user_mail+"|"+i.tx_stts,onClick:e.handleEdit,bsStyle:"info"}," Edit ")," ")),r.a.createElement("tr",{id:"tr|"+i.id_user+"|edit",class:i.tx_stts+"_tr_status tredit trUsers"},r.a.createElement("td",{width:"5%"}," ",s++," "),r.a.createElement("td",{align:"left",width:"25%"},r.a.createElement(T.a,{controlId:i.id_user+"|tx_user_name",bsSize:"small"},r.a.createElement(G.a,{autoFocus:!0,type:"text"})),r.a.createElement("input",{type:"hidden",id:i.id_user+"|tx_role_current",value:i.tx_role}),"PM"===t||"Developer"===t?r.a.createElement(n.Fragment,null," ",r.a.createElement("input",{type:"hidden",id:i.id_user+"|tx_role",value:i.tx_role})," ",r.a.createElement("input",{type:"hidden",id:i.id_user+"|tx_user_mail",value:i.tx_user_mail})," ",r.a.createElement("input",{type:"hidden",id:i.id_user+"|tx_stts",value:i.tx_stts})," "):""),"Admin"===t?r.a.createElement(n.Fragment,null,r.a.createElement("td",{align:"left",width:"20%"},r.a.createElement(T.a,{controlId:i.id_user+"|tx_role",bsSize:"small"},r.a.createElement(G.a,{componentClass:"select",placeholder:"select"},r.a.createElement("option",{value:"Admin"},"Admin"),r.a.createElement("option",{value:"PM"},"PM"),r.a.createElement("option",{value:"Developer"},"Developer")))),r.a.createElement("td",{align:"left",width:"25%"}," ",r.a.createElement("input",{type:"hidden",id:i.id_user+"|tx_user_mail",value:i.tx_user_mail})," ",i.tx_user_mail," "),r.a.createElement("td",{align:"left",width:"10%"},"Admin"!==i.tx_role?r.a.createElement(T.a,{controlId:i.id_user+"|tx_stts",bsSize:"small"},r.a.createElement(G.a,{componentClass:"select",placeholder:"select"},r.a.createElement("option",{value:"Active"},"Active"),r.a.createElement("option",{value:"Inactive"},"Inactive"))):r.a.createElement("div",null," ",r.a.createElement("input",{type:"hidden",id:i.id_user+"|tx_stts",value:i.tx_stts})," ",i.tx_stts," "))):"",r.a.createElement("td",{align:"left",width:"20%"}," ",r.a.createElement(b.a,{id:i.id_user+"|cancel",onClick:e.handleCancel,bsStyle:"danger"}," Cancel ")," ",r.a.createElement(b.a,{id:i.id_user+"|update",onClick:e.handleUpdate,bsStyle:"primary"}," Update ")," "))):"")}))," "))," ");this.props.history.push("/")}},{key:"render",value:function(){return r.a.createElement("div",{className:"UserAdministration"},!this.state.isLoading&&this.drawUsersTable())}}]),t}(n.Component)),Z=(a(433),a(479)),ee=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).handleCreate=function(){var e=Object(o.a)(c.a.mark(function e(t){var n,r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==(n=document.getElementById("tx_new_prjt").value.trim())){e.next=5;break}alert("Please provide a project name"),e.next=17;break;case 5:return r={tx_prjt_name:n,tx_stts:"Commencing"},a.setState({isLoading:!0}),e.prev=7,e.next=10,a.createProject(r);case 10:a.props.history.push("/projectadministration"),window.location.reload(),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(7),alert(e.t0.message);case 17:case"end":return e.stop()}},e,this,[[7,14]])}));return function(t){return e.apply(this,arguments)}}(),a.handleChange=function(e){a.setState(Object(H.a)({},e.target.id,e.target.value))},a.handleEdit=function(){var e=Object(o.a)(c.a.mark(function e(t){var a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=t.target.id.split("|"),document.getElementById("tr|"+a[0]+"|view").style.display="none",document.getElementById("tr|"+a[0]+"|edit").style.display="table-row";case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.handleCancel=function(){var e=Object(o.a)(c.a.mark(function e(t){var a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=t.target.id.split("|"),document.getElementById("tr|"+a[0]+"|view").style.display="table-row",document.getElementById("tr|"+a[0]+"|edit").style.display="none";case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.handleDelete=function(){var e=Object(o.a)(c.a.mark(function e(t){var n,r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target.id.split("|"),[],!((r=N(n[0],a.state.users_and_projects)).length>0)){e.next=7;break}alert("Before deleting this project, deallocate the corresponding users from the project  ("+r.length+" user(s))"),e.next=20;break;case 7:if(window.confirm("Are you sure you want to delete this project?")){e.next=10;break}return e.abrupt("return");case 10:return e.prev=10,document.getElementById("tr|"+n[0]+"|view").remove(),document.getElementById("tr|"+n[0]+"|edit").remove(),e.next=15,a.deleteProject(n[0]);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(10),alert(e.t0);case 20:case"end":return e.stop()}},e,this,[[10,17]])}));return function(t){return e.apply(this,arguments)}}(),a.handleUpdate=function(){var e=Object(o.a)(c.a.mark(function e(t){var n,r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target.id.split("|"),""!==document.getElementById(n[0]+"|tx_prjt_name").value.trim()){e.next=5;break}alert("Please provide a new project name"),e.next=19;break;case 5:return r={tx_prjt_name:document.getElementById(n[0]+"|tx_prjt_name").value.trim(),tx_stts:document.getElementById(n[0]+"|tx_stts").value},a.setState({isLoading:!0}),e.prev=7,e.next=10,a.updateProject(n[0],r);case 10:a.props.history.push("/projectadministration"),window.location.reload(),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(7),alert(e.t0.message);case 17:document.getElementById("divMain").style.display="none",a.setState({isLoading:!1});case 19:case"end":return e.stop()}},e,this,[[7,14]])}));return function(t){return e.apply(this,arguments)}}(),a.handleShow=function(){var e=Object(o.a)(c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({show:!0});case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.handleClose=function(){var e=Object(o.a)(c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({show:!1});case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.filterStatus=function(){var e=Object(o.a)(c.a.mark(function e(t){var a,n,r,s,i,l;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=document.getElementById(t.target.id).value,n=document.getElementsByClassName("tredit"),r=[],s=["Commencing","Active","Stand-By","Completed","Cancelled"],i=0,l=0,"All"===a)for(i=0;i<s.length;i++)for(r=document.getElementsByClassName(s[i]+"_tr_status"),l=0;l<r.length;l++)r[l].style.display="table-row";else for(i=0;i<s.length;i++)for(r=document.getElementsByClassName(s[i]+"_tr_status"),l=0;l<r.length;l++)console.log("arry_stts de j = "+s[i]+", selectedStatus = "+a+", arry_trs = "+r[l]),r[l].style.display=s[i]===a?"table-row":"none";for(i=0;i<n.length;i++)n[i].style.display="none";case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.state={isLoading:!0,users:[],projects:[],projects_by_user:[],array_projects_by_user:[],tx_new_prjt:"",show:!1},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(c.a.mark(function e(){var t,a,n,r,s,i,l;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.isAuthenticated){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.users();case 5:return t=e.sent,this.setState({users:t}),e.next=9,this.projects();case 9:return a=e.sent,this.setState({projects:a}),e.next=13,this.projects_by_user();case 13:for(n=e.sent,this.setState({projects_by_user:n}),r=0;r<this.state.projects_by_user.length;r++)this.state.array_projects_by_user.push(this.state.projects_by_user[r].id_prjt);return e.next=18,this.users_and_projects();case 18:s=e.sent,this.setState({users_and_projects:s}),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(2),alert(e.t0);case 25:for(this.setState({isLoading:!1}),i=document.getElementsByClassName("tredit"),l=0;l<i.length;l++)i[l].style.display="none";this.state.projects.map(function(e,t){try{document.getElementById(e.id_prjt+"|tx_prjt_name").value=e.tx_prjt_name,document.getElementById(e.id_prjt+"|tx_stts").value=e.tx_stts}catch(a){}});case 29:case"end":return e.stop()}},e,this,[[2,22]])}));return function(){return e.apply(this,arguments)}}()},{key:"users",value:function(){return k.API.get("pm","/list-users")}},{key:"projects",value:function(){return k.API.get("pm","/list-projects")}},{key:"projects_by_user",value:function(){return k.API.get("pm","/get-projects-by-user/"+O(this.state.users).id_user)}},{key:"users_and_projects",value:function(){return k.API.get("pm","/list-users-and-projects")}},{key:"createProject",value:function(e){return k.API.post("pm","/create-projects/",{body:e})}},{key:"deleteProject",value:function(e){return k.API.del("pm","/delete-projects/"+e)}},{key:"updateProject",value:function(e,t){return k.API.put("pm","/update-projects/"+e,{body:t})}},{key:"drawProjectsTable",value:function(){var e=this,t=O(this.state.users).tx_role,a=1;if("Admin"===t||"PM"===t||"Developer"===t)return r.a.createElement("div",{id:"divMain"}," ",r.a.createElement("form",null,r.a.createElement(w.a,{align:"left",id:"pageHeader"}," ",r.a.createElement("img",{src:"./pmicons/030-diagram.png",class:"pmsmallicons",alt:""})," ","Admin"===t?"Project administration":"PM"===t?"Project tracking":"My projects"," "),"Admin"===t?r.a.createElement("div",null,r.a.createElement(j.a,{striped:!0,bordered:!0,condensed:!0,hover:!0}," ",r.a.createElement("tr",null,r.a.createElement("td",{align:"left",width:"50%"}," ",r.a.createElement(b.a,{bsStyle:"success",onClick:this.handleShow}," New project ")," "),r.a.createElement("td",{align:"right",width:"50%"},r.a.createElement(T.a,{controlId:"ddl_status",bsSize:"small"},r.a.createElement(R.a,null,"Select project status"),r.a.createElement(G.a,{componentClass:"select",placeholder:"select",onChange:this.filterStatus},r.a.createElement("option",{value:"All"},"All"),r.a.createElement("option",{value:"Commencing"},"Commencing"),r.a.createElement("option",{value:"Active"},"Active"),r.a.createElement("option",{value:"Stand-By"},"Stand-By"),r.a.createElement("option",{value:"Completed"},"Completed"),r.a.createElement("option",{value:"Cancelled"},"Cancelled")))))," ")," "):"",r.a.createElement(j.a,{striped:!0,bordered:!0,condensed:!0,hover:!0},r.a.createElement("thead",{class:"tHeadProjects"}," ",r.a.createElement("tr",null," ",r.a.createElement("th",null," # ")," ",r.a.createElement("th",null," Project name ")," ",r.a.createElement("th",null," Status ")," ","Admin"===t||"PM"===t?r.a.createElement("th",null," Edit "):""," ")," "),this.state.projects.sort(function(e,t){return e.tx_prjt_name<t.tx_prjt_name?-1:e.tx_prjt_name>t.tx_prjt_name?1:0}).map(function(s,i){return r.a.createElement(n.Fragment,null,"Admin"===t&&(""!==B("project")&&s.id_prjt===B("project")||""===B("project")||null===B("project"))||"Admin"!==t&&e.state.array_projects_by_user.indexOf(s.id_prjt)>=0?r.a.createElement(n.Fragment,null,r.a.createElement("tr",{class:s.tx_stts+"_tr_status trProjects",id:"tr|"+s.id_prjt+"|view"},r.a.createElement("td",{width:"5%"}," ",a," "),r.a.createElement("td",{align:"left",width:"25%",id:s.id_prjt+"|tr_prjt_name"}," ",s.tx_prjt_name," "),r.a.createElement("td",{align:"left",width:"10%",id:s.id_prjt+"|tr_stts"}," ",s.tx_stts," "),"Admin"===t||"PM"===t?r.a.createElement("td",{align:"left",width:"20%"},r.a.createElement(b.a,{id:s.id_prjt+"|"+s.tx_prjt_name+"|"+s.tx_stts,onClick:e.handleEdit,bsStyle:"info"}," Edit "),"Admin"===t?r.a.createElement(b.a,{id:s.id_prjt+"|"+s.tx_prjt_name+"|"+s.tx_stts+"|delete",onClick:e.handleDelete,bsStyle:"danger"}," Delete "):""):""),r.a.createElement("tr",{id:"tr|"+s.id_prjt+"|edit",class:s.tx_stts+"_tr_status tredit trProjects"},r.a.createElement("td",null," ",a++," "),r.a.createElement("td",{align:"left"},"Admin"===t?r.a.createElement(T.a,{controlId:s.id_prjt+"|tx_prjt_name",bsSize:"small"},r.a.createElement(G.a,{autoFocus:!0,type:"text",className:"formInput"})):r.a.createElement("div",null," ",s.tx_prjt_name," ",r.a.createElement("input",{type:"hidden",id:s.id_prjt+"|tx_prjt_name"})," ")),r.a.createElement("td",{align:"left"},r.a.createElement(T.a,{controlId:s.id_prjt+"|tx_stts",bsSize:"small"},r.a.createElement(G.a,{componentClass:"select",placeholder:"select"},r.a.createElement("option",{value:"Commencing"},"Commencing"),r.a.createElement("option",{value:"Active"},"Active"),r.a.createElement("option",{value:"Stand-By"},"Stand-By"),r.a.createElement("option",{value:"Completed"},"Completed"),r.a.createElement("option",{value:"Cancelled"},"Cancelled")))),r.a.createElement("td",{align:"left"}," ",r.a.createElement(b.a,{id:s.id_prjt+"|cancel",onClick:e.handleCancel,bsStyle:"danger"}," Cancel ")," ",r.a.createElement(b.a,{id:s.id_prjt+"|update",onClick:e.handleUpdate,bsStyle:"primary"}," Update ")," "))):"")})),r.a.createElement(Z.a,{show:this.state.show,onHide:this.handleClose},r.a.createElement(Z.a.Header,{closeButton:!0},r.a.createElement(Z.a.Title,null," New project ")),r.a.createElement(Z.a.Body,null,r.a.createElement(T.a,{controlId:"tx_new_prjt",bsSize:"small"},r.a.createElement(R.a,null," Project name "),r.a.createElement(G.a,{autoFocus:!0,type:"text",value:this.state.tx_new_prjt,onChange:this.handleChange}))),r.a.createElement(Z.a.Footer,null,r.a.createElement(b.a,{onClick:this.handleCreate,bsStyle:"primary"},"Create"),r.a.createElement(b.a,{onClick:this.handleClose},"Close"))))," ");this.props.history.push("/")}},{key:"render",value:function(){return r.a.createElement("div",{className:"ProjectAdministration"},!this.state.isLoading&&this.drawProjectsTable())}}]),t}(n.Component),te=(a(460),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).handleChanges=function(){var e=Object(o.a)(c.a.mark(function e(t){var n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("add"!==(n=t.target.id.split("|"))[1]){e.next=7;break}a.state.modal_parameters=n,a.state.flag_ac="add",a.handleShow(),e.next=26;break;case 7:if("change"!==n[1]){e.next=13;break}a.state.modal_parameters=n,a.state.flag_ac="change",a.handleShow(),e.next=26;break;case 13:if("delete"!==n[1]){e.next=26;break}if(window.confirm("Are you sure you want to delete this contributor from the project?")){e.next=17;break}return e.abrupt("return");case 17:return e.prev=17,e.next=20,a.deleteUserProject(n[0],n[3]);case 20:window.location.reload(),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(17),alert(e.t0);case 26:case"end":return e.stop()}},e,this,[[17,23]])}));return function(t){return e.apply(this,arguments)}}(),a.handleAddChange=function(){var e=Object(o.a)(c.a.mark(function e(t){var n,r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.state.modal_parameters,r={id_prjt:n[0],id_user:document.getElementById("ddl_user_name").value},"Developer"!==n[2]){e.next=8;break}return e.next=5,a.createUserProject(r);case 5:window.location.reload(),e.next=21;break;case 8:if("add"!==n[1]){e.next=15;break}return a.setState({show:!1}),e.next=12,a.createUserProject(r);case 12:window.location.reload(),e.next=21;break;case 15:return a.setState({show:!1}),e.next=18,a.deleteUserProject(n[0],n[3]);case 18:return e.next=20,a.createUserProject(r);case 20:window.location.reload();case 21:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.handleShow=function(){var e=Object(o.a)(c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({show:!0});case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.handleClose=function(){var e=Object(o.a)(c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({show:!1});case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.fillDropDown=function(){var e=Object(o.a)(c.a.mark(function e(t){var n,r,s,i;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(n=[],r=a.state.modal_parameters,n="Developer"===r[2]?a.state.developers:a.state.pms,s=0;s<n.length;s++)(i=document.createElement("option")).text=n[s].tx_user_name,i.value=n[s].id_user,document.getElementById("ddl_user_name").add(i);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.state={isLoading:!0,users:[],projects:[],users_and_projects:[],projects_by_user:[],array_projects_by_user:[],pms:[],developers:[],flag_ac:"",modal_parameters:""},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(c.a.mark(function e(){var t,a,n,r,s,i=this;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.isAuthenticated){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.users();case 5:return t=e.sent,this.setState({users:t}),e.next=9,this.projects();case 9:return a=e.sent,this.setState({projects:a}),e.next=13,this.users_and_projects();case 13:return n=e.sent,this.setState({users_and_projects:n}),e.next=17,this.projects_by_user();case 17:for(r=e.sent,this.setState({projects_by_user:r}),s=0;s<this.state.projects_by_user.length;s++)this.state.array_projects_by_user.push(this.state.projects_by_user[s].id_prjt);e.next=25;break;case 22:e.prev=22,e.t0=e.catch(2),alert(e.t0);case 25:this.setState({isLoading:!1}),this.state.users.map(function(e,t){"PM"===e.tx_role?i.state.pms.push(e):"Developer"===e.tx_role&&i.state.developers.push(e)});case 27:case"end":return e.stop()}},e,this,[[2,22]])}));return function(){return e.apply(this,arguments)}}()},{key:"users",value:function(){return k.API.get("pm","/list-users")}},{key:"projects",value:function(){return k.API.get("pm","/list-projects")}},{key:"users_and_projects",value:function(){return k.API.get("pm","/list-users-and-projects")}},{key:"projects_by_user",value:function(){return k.API.get("pm","/get-projects-by-user/"+O(this.state.users).id_user)}},{key:"deleteUserProject",value:function(e,t){return k.API.del("pm","/delete-users-and-projects/"+e+"/"+t)}},{key:"createUserProject",value:function(e){return k.API.post("pm","/create-users-and-projects/",{body:e})}},{key:"getSpecificUserByProject",value:function(e,t,a){var n=this,s=[],i=0,l=0;for(l=0;l<this.state.users_and_projects.length;l++)this.state.users_and_projects[l].id_prjt===e&&s.push(this.state.users_and_projects[l].id_user);if(0===s.length)i=1;else{var c=[];for(l=0;l<s.length;l++){var o=P(this.state.users,s[l]);("PM"===t&&"PM"===o.tx_role||"Developer"===t&&"Developer"===o.tx_role)&&c.push(this.state.users[o.nu_indx])}if(0!==c.length)return"PM"===t?"Admin"===a?r.a.createElement("div",null," ",c[0].tx_user_name," ",r.a.createElement("br",null)," ",r.a.createElement(b.a,{id:e+"|change|"+t+"|"+c[0].id_user,bsStyle:"info",bsSize:"xsmall",onClick:this.handleChanges}," Change ",t," ")," ",r.a.createElement(b.a,{id:e+"|delete|"+t+"|"+c[0].id_user,bsStyle:"danger",bsSize:"xsmall",onClick:this.handleChanges}," Remove ")," "):r.a.createElement("div",null," ",c[0].tx_user_name," "):r.a.createElement("div",null,c.map(function(a,s){return r.a.createElement("div",{id:"div|"+e+"|"+c[s].id_user}," * ",c[s].tx_user_name," ",r.a.createElement(b.a,{id:e+"|delete|"+t+"|"+c[s].id_user,bsStyle:"danger",bsSize:"xsmall",onClick:n.handleChanges}," Remove ")," ")}),r.a.createElement("br",null)," ",r.a.createElement(b.a,{id:e+"|add|"+t,bsStyle:"primary",bsSize:"xsmall",onClick:this.handleChanges}," Add ",t," "));i=1}if(1===i)return r.a.createElement(b.a,{id:e+"|add|"+t,bsStyle:"primary",bsSize:"xsmall",onClick:this.handleChanges}," Add ",t," ")}},{key:"drawAssignationProjects",value:function(){var e=this,t=O(this.state.users).tx_role,a=1;if("Admin"===t||"PM"===t)return r.a.createElement("div",{id:"divMain"}," ",r.a.createElement("form",null,r.a.createElement(w.a,{align:"left",id:"pageHeader"}," ",r.a.createElement("img",{src:"./pmicons/006-files.png",class:"pmsmallicons",alt:""})," Project Staffing "),r.a.createElement(j.a,{striped:!0,bordered:!0,condensed:!0,hover:!0},r.a.createElement("thead",{class:"tHeadStaffing"}," ",r.a.createElement("tr",null," ",r.a.createElement("th",null," # ")," ",r.a.createElement("th",null," Project name ")," ",r.a.createElement("th",null," Project Manager ")," ",r.a.createElement("th",null," Developers ")," ")," "),this.state.projects.sort(function(e,t){return e.tx_prjt_name<t.tx_prjt_name?-1:e.tx_prjt_name>t.tx_prjt_name?1:0}).map(function(s,i){return r.a.createElement(n.Fragment,null,"Admin"===t||e.state.array_projects_by_user.indexOf(s.id_prjt)>=0?r.a.createElement(n.Fragment,{bordered:!0},r.a.createElement("tr",{class:"trStaffing"},r.a.createElement("td",null," ",a++," "),r.a.createElement("td",{align:"left",class:"tdborder",valign:"top"}," ",s.tx_prjt_name," "),r.a.createElement("td",{align:"left",class:"tdborder",valign:"top"}," ",e.getSpecificUserByProject(s.id_prjt,"PM",t)," "),r.a.createElement("td",{align:"left",class:"tdborder",valign:"top"}," ",e.getSpecificUserByProject(s.id_prjt,"Developer",t)," "))):"")})),r.a.createElement(Z.a,{show:this.state.show,onHide:this.handleClose,onShow:this.fillDropDown},r.a.createElement(Z.a.Header,{closeButton:!0},r.a.createElement(Z.a.Title,null," ","change"===this.state.flag_ac?"Change PM":"New contributor"," ")),r.a.createElement(Z.a.Body,null,r.a.createElement(T.a,{controlId:"ddl_user_name",bsSize:"small"},r.a.createElement(R.a,null," ","change"===this.state.flag_ac?"Select PM":"Select contributor"," "),r.a.createElement(G.a,{componentClass:"select",placeholder:"select"}))),r.a.createElement(Z.a.Footer,null,r.a.createElement(b.a,{bsStyle:"primary",onClick:this.handleAddChange}," ","change"===this.state.flag_ac?"Change":"Add"," "),r.a.createElement(b.a,{onClick:this.handleClose},"Close"))))," ");this.props.history.push("/")}},{key:"render",value:function(){return r.a.createElement("div",{className:"AssignationProjects"},!this.state.isLoading&&this.drawAssignationProjects())}}]),t}(n.Component)),ae=a(167),ne=function(e){var t=e.component,a=e.props,n=Object(W.a)(e,["component","props"]);return r.a.createElement(y.a,Object.assign({},n,{render:function(e){return a.isAuthenticated?r.a.createElement(t,Object.assign({},e,a)):r.a.createElement(ae.a,{to:"/login?redirect=".concat(e.location.pathname).concat(e.location.search)})}}))};var re=function(e){var t=e.component,a=e.props,n=Object(W.a)(e,["component","props"]),s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href;e=e.replace(/[[]]/g,"\\$&");var a=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)","i").exec(t);return a?a[2]?decodeURIComponent(a[2].replace(/\+/g," ")):"":null}("redirect");return r.a.createElement(y.a,Object.assign({},n,{render:function(e){return a.isAuthenticated?r.a.createElement(ae.a,{to:""===s||null===s?"/":s}):r.a.createElement(t,Object.assign({},e,a))}}))},se=function(e){var t=e.childProps;return r.a.createElement(x.a,null,r.a.createElement(q,{path:"/",exact:!0,component:z,props:t}),r.a.createElement(re,{path:"/login",exact:!0,component:K,props:t}),r.a.createElement(ne,{path:"/signup",exact:!0,component:Q,props:t}),r.a.createElement(ne,{path:"/useradministration",exact:!0,component:X,props:t}),r.a.createElement(ne,{path:"/projectadministration",exact:!0,component:ee,props:t}),r.a.createElement(ne,{path:"/assignationprojects",exact:!0,component:te,props:t}),r.a.createElement(y.a,{component:V}))},ie=a(179),le=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).userHasAuthenticated=function(e){a.setState({isAuthenticated:e})},a.handleLogout=function(){var e=Object(o.a)(c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.Auth.signOut();case 2:a.userHasAuthenticated(!1),M("tx_user_mail",""),a.props.history.push("/");case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.state={isAuthenticated:!1,isAuthenticating:!0},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.Auth.currentSession();case 3:this.userHasAuthenticated(!0),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),"No current user"!==e.t0&&alert(e.t0);case 9:this.setState({isAuthenticating:!1});case 10:case"end":return e.stop()}},e,this,[[0,6]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e={isAuthenticated:this.state.isAuthenticated,userHasAuthenticated:this.userHasAuthenticated};return!this.state.isAuthenticating&&r.a.createElement("div",{class:"AppContainer"},r.a.createElement(g.a,{fluid:!0,collapseOnSelect:!0,className:"navheader"},r.a.createElement(g.a.Header,null,r.a.createElement(g.a.Brand,null,r.a.createElement(_.a,{to:"/"}," Home ")),r.a.createElement(g.a.Toggle,null)),r.a.createElement(g.a.Collapse,null,r.a.createElement(E.a,{pullRight:!0},this.state.isAuthenticated?r.a.createElement(v.a,{onClick:this.handleLogout},"Logout"):r.a.createElement(n.Fragment,null,r.a.createElement(ie.LinkContainer,{to:"/login"},r.a.createElement(v.a,null,"Login")))))),r.a.createElement(se,{childProps:e}))}}]),t}(n.Component),ce=Object(f.a)(le);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var oe=a(164);C.a.configure({Auth:{mandatorySignIn:!0,region:I.REGION,userPoolId:I.USER_POOL_ID,identityPoolId:I.IDENTITY_POOL_ID,userPoolWebClientId:I.APP_CLIENT_ID},Storage:{region:S.REGION,bucket:S.BUCKET,identityPoolId:I.IDENTITY_POOL_ID},API:{endpoints:[{name:"pm",endpoint:A.URL,region:A.REGION}]}}),i.a.render(r.a.createElement(oe.a,null,r.a.createElement(ce,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},80:function(e,t){}},[[183,2,1]]]);
//# sourceMappingURL=main.9dc30707.chunk.js.map